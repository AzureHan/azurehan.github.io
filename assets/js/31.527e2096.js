(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{185:function(t,e,r){"use strict";r.r(e);var s=r(0),i=Object(s.a)({},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),t._m(12),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),t._m(15),t._v(" "),t._m(16),t._v(" "),t._m(17),t._v(" "),t._m(18),t._v(" "),t._m(19),t._v(" "),t._m(20),t._v(" "),t._m(21),t._v(" "),t._m(22),t._v(" "),t._m(23),t._v(" "),t._m(24),t._v(" "),t._m(25),t._v(" "),t._m(26),t._v(" "),t._m(27),t._v(" "),t._m(28),t._v(" "),t._m(29),t._v(" "),t._m(30),t._v(" "),t._m(31),t._v(" "),t._m(32),t._v(" "),t._m(33),t._v(" "),t._m(34),t._v(" "),t._m(35),t._v(" "),t._m(36),t._v(" "),t._m(37),t._v(" "),t._m(38),t._v(" "),t._m(39),t._v(" "),t._m(40),t._v(" "),t._m(41),t._v(" "),t._m(42),t._v(" "),t._m(43),t._v(" "),t._m(44),t._v(" "),t._m(45),t._v(" "),t._m(46),t._v(" "),r("p",[t._v("有两种不同的持久化方法可以将数据存储在磁盘中，一种叫快照 RDB ，另一种叫只追加文件 AOF 。RDB 用于生成某个时间点的备份信息，并且会对当前的 key-value 进行编码存储到 RDB 文件中，恢复时是将快照文件直接读到内存里。AOF 以执行日志的形式，记录服务器所有的写请求存储到 AOF 文件中，在服务重启的时候通过回放执行命令请求来恢复原有的数据。")]),t._v(" "),t._m(47),t._v(" "),t._m(48),t._v(" "),t._m(49),t._v(" "),t._m(50),t._v(" "),t._m(51),t._v(" "),t._m(52),t._v(" "),t._m(53),t._v(" "),r("p",[t._v("除了使用 RDB + AOF 数据持久化保证数据可用性，也可以使用 RDB + 主从复制 保证可用性，同时还能获得较高的效率。")]),t._v(" "),t._m(54),t._v(" "),t._m(55),t._v(" "),t._m(56),t._v(" "),t._m(57),t._v(" "),t._m(58),t._v(" "),r("ol",[r("li",[r("a",{attrs:{href:"https://blog.csdn.net/cuipeng0916/article/details/53561869",target:"_blank",rel:"noopener noreferrer"}},[t._v("Redis 入门 Hello World"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/28073983",target:"_blank",rel:"noopener noreferrer"}},[t._v("Redis 深入之道：原理解析、场景使用以及视频解读"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://juejin.im/post/5ad6e4066fb9a028d82c4b66",target:"_blank",rel:"noopener noreferrer"}},[t._v("面试中关于 Redis 的问题看这篇就够了"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://blog.csdn.net/hguisu/article/details/8836819",target:"_blank",rel:"noopener noreferrer"}},[t._v("Redis 应用场景"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://yq.aliyun.com/articles/64345",target:"_blank",rel:"noopener noreferrer"}},[t._v("Redis 协议简介及持久化 AOF 文件解析"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://yq.aliyun.com/articles/193034",target:"_blank",rel:"noopener noreferrer"}},[t._v("Redis4.0 之 RDB & AOF 混合持久化"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://learnku.com/articles/22363",target:"_blank",rel:"noopener noreferrer"}},[t._v("在面试前必须要知道的 Redis 面试内容"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://my.oschina.net/u/267858/blog/471904",target:"_blank",rel:"noopener noreferrer"}},[t._v("Redis 作者谈 Redis 应用场景"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://www.imooc.com/article/23549",target:"_blank",rel:"noopener noreferrer"}},[t._v("脚踏两只船的困惑 - Memcached 与 Redis"),r("OutboundLink")],1)])])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"redis-笔记"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redis-笔记","aria-hidden":"true"}},[this._v("#")]),this._v(" Redis 笔记")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Redis 是"),e("strong",[this._v("键值型数据库")]),this._v("，支持数据类型有：字符串（String）、列表（List）、集合（Set）、有序集合（Sorted Set）、哈希表（Hash）。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_1-数据类型"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-数据类型","aria-hidden":"true"}},[this._v("#")]),this._v(" 1. 数据类型")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_1-1-字符串（string）"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-字符串（string）","aria-hidden":"true"}},[this._v("#")]),this._v(" 1.1 字符串（String）")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"常用命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#常用命令","aria-hidden":"true"}},[this._v("#")]),this._v(" 常用命令")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("SET")]),this._v(" ：创建 / 修改 键的值")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("STRLEN")]),this._v(" ：返回字符串值的长度")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("GET / MGET")]),this._v(" ：返回 键的值")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("INCR / DECR / INCRBY / DECRBY")]),this._v(" ：数值 自增 或 自减")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"应用场景"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#应用场景","aria-hidden":"true"}},[this._v("#")]),this._v(" 应用场景")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("字符串缓存")]),this._v(" "),e("li",[this._v("计数器")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_1-2-列表（list）"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-列表（list）","aria-hidden":"true"}},[this._v("#")]),this._v(" 1.2 列表（List）")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"常用命令-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#常用命令-2","aria-hidden":"true"}},[this._v("#")]),this._v(" 常用命令")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("LPUSH / RPUSH / LSET")]),this._v(" ：创建 或 修改 成员")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("LLEN")]),this._v(" ：返回列表的长度")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("LINDEX / LRANGE / LPOP / RPOP")]),this._v(" ：返回 或 弹出 成员")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("LREM / LTRIM")]),this._v(" ：移除成员")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"应用场景-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#应用场景-2","aria-hidden":"true"}},[this._v("#")]),this._v(" 应用场景")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("任务队列")]),this._v(" "),e("li",[this._v("可分页的按最近时间排序的评论列表")]),this._v(" "),e("li",[this._v("关注列表 / 粉丝列表")]),this._v(" "),e("li",[this._v("最近访问记录")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_1-3-集合（set）"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-集合（set）","aria-hidden":"true"}},[this._v("#")]),this._v(" 1.3 集合（Set）")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"常用命令-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#常用命令-3","aria-hidden":"true"}},[this._v("#")]),this._v(" 常用命令")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("SADD")]),this._v(" ：创建成员。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("SCARD key")]),this._v(" ：返回成员数量")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("SINTER / SUNION / SDIFF")]),this._v(" 返回集合之间的 交集 / 并集 / 差集")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("SMEMBERS / SRANDMEMBER / SPOP key")]),this._v(" ：返回 / 弹出 成员")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("SREM")]),this._v(" ：移除成员")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"应用场景-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#应用场景-3","aria-hidden":"true"}},[this._v("#")]),this._v(" 应用场景")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("共同好友 / 共同关注")]),this._v(" "),e("li",[this._v("记录文章已读的用户")]),this._v(" "),e("li",[this._v("获取某段时间所有数据排重值")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_1-4-有序集合（sorted-set）"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-有序集合（sorted-set）","aria-hidden":"true"}},[this._v("#")]),this._v(" 1.4 有序集合（Sorted Set）")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"常用命令-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#常用命令-4","aria-hidden":"true"}},[this._v("#")]),this._v(" 常用命令")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("ZADD")]),this._v(" ：创建成员")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("ZCOUNT / ZCARD")]),this._v(" ：返回成员数量")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("ZRANGE / ZREVRANGE / ZRANGEBYSCORE / ZREVRANGEBYSCORE")]),this._v(" ：返回成员")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("ZREM / ZREMBYRANK / ZREMBYSCORE")]),this._v(" ：移除成员")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"应用场景-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#应用场景-4","aria-hidden":"true"}},[this._v("#")]),this._v(" 应用场景")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("排行榜 / 投票榜")]),this._v(" "),e("li",[this._v("延时任务队列 / 优先级任务队列")]),this._v(" "),e("li",[this._v("记录过期时间")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_1-5-哈希表（hash）"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-哈希表（hash）","aria-hidden":"true"}},[this._v("#")]),this._v(" 1.5 哈希表（Hash）")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"常用命令-5"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#常用命令-5","aria-hidden":"true"}},[this._v("#")]),this._v(" 常用命令")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("HSET / HMSET")]),this._v(" ：设置值")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("HEXISTS")]),this._v(" ：检查域存在")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("HLEN / HSTRLEN")]),this._v(" ：返回 域 或 值的字符 数量")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("HGET / HMGET / HGETALL / HKEYS / HVALS")]),this._v(" ：返回域 / 值")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("HINCRBY / HINCRBYFLOAT")]),this._v(" ：数值增量")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("HDEL")]),this._v(" ：删除域")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"应用场景-5"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#应用场景-5","aria-hidden":"true"}},[this._v("#")]),this._v(" 应用场景")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("商品详情 / 个人信息")]),this._v(" "),e("li",[this._v("一天的用户活跃时间")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_2-数据持久化"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-数据持久化","aria-hidden":"true"}},[this._v("#")]),this._v(" 2. 数据持久化")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_2-1-rdb"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-rdb","aria-hidden":"true"}},[this._v("#")]),this._v(" 2.1 RDB")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("RDB 一般只用作后备用途，建议只在 Slave 上持久化 RDB 文件，而且只要 15 分钟备份一次就够了，只保留 "),e("code",[this._v("save 900 1")]),this._v(" 这条规则。由于「快照」的特性，无法增量更新数据，只能保存新的一份 RDB 文件。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_2-2-aof"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-aof","aria-hidden":"true"}},[this._v("#")]),this._v(" 2.2 AOF")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("AOF 文件记录的是 Redis 通信协 的写请求命令，RESP (REdis Serialization Protocol) 的特点是：易实现、解析快、易理解。客户端将请求以 RESP 形式发送到服务端，服务端执行完成后将请求追加写入 AOF 文件中。写入频率对应配置项 "),e("code",[this._v("appendfsync")]),this._v(" 的两种选项： "),e("code",[this._v("always")]),this._v(" 和 "),e("code",[this._v("everysec")]),this._v(" ，后者效率较高但数据完整性较差。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_2-3-对比-rdb-与-aof"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-对比-rdb-与-aof","aria-hidden":"true"}},[this._v("#")]),this._v(" 2.3 对比 RDB 与 AOF")])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("table",[r("thead",[r("tr",[r("th",[t._v("模式")]),t._v(" "),r("th",[t._v("效率")]),t._v(" "),r("th",[t._v("数据完整性")]),t._v(" "),r("th",[t._v("恢复速度")]),t._v(" "),r("th",[t._v("文件体积")])])]),t._v(" "),r("tbody",[r("tr",[r("td",[t._v("RDB")]),t._v(" "),r("td",[t._v("高")]),t._v(" "),r("td",[t._v("差")]),t._v(" "),r("td",[t._v("快")]),t._v(" "),r("td",[t._v("小")])]),t._v(" "),r("tr",[r("td",[t._v("AOF")]),t._v(" "),r("td",[t._v("差 / 较差")]),t._v(" "),r("td",[t._v("好 / 较好")]),t._v(" "),r("td",[t._v("慢")]),t._v(" "),r("td",[t._v("大")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Redis 4.0 开始允许使用 RDB & AOF 混合持久化的方式结合了两者的优点通过 "),e("code",[this._v("aof-use-rdb-preamble")]),this._v(" 配置项可以打开混合开关。这种情况下如果重启 Redis ，因为 AOF 数据更加完整，所以会优先从 AOF 中恢复数据。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_3-淘汰策略"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-淘汰策略","aria-hidden":"true"}},[this._v("#")]),this._v(" 3. 淘汰策略")])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",[r("li",[r("strong",[t._v("volatile-lru")]),t._v(" ：从已设置过期时间的数据集（server.db[i].expires）中挑选最近最少使用的数据淘汰")]),t._v(" "),r("li",[r("strong",[t._v("volatile-ttl")]),t._v(" ：从已设置过期时间的数据集（server.db[i].expires）中挑选将要过期的数据淘汰")]),t._v(" "),r("li",[r("strong",[t._v("volatile-random")]),t._v(" ：从已设置过期时间的数据集（server.db[i].expires）中任意选择数据淘汰")]),t._v(" "),r("li",[r("strong",[t._v("allkeys-lru")]),t._v(" ：从数据集（server.db[i].dict）中挑选最近最少使用的数据淘汰")]),t._v(" "),r("li",[r("strong",[t._v("allkeys-random")]),t._v(" ：从数据集（server.db[i].dict）中任意选择数据淘汰")]),t._v(" "),r("li",[r("strong",[t._v("no-eviction")]),t._v(" ：禁止剔除数据")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_4-事务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-事务","aria-hidden":"true"}},[this._v("#")]),this._v(" 4. 事务")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_5-集群"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-集群","aria-hidden":"true"}},[this._v("#")]),this._v(" 5. 集群")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_6-参考"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6-参考","aria-hidden":"true"}},[this._v("#")]),this._v(" 6. 参考")])}],!1,null,null,null);i.options.__file="README.md";e.default=i.exports}}]);