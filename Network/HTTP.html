<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>HTTP 协议 | Azure&#39;s Notebook</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/assets/css/0.styles.003d6652.css" as="style"><link rel="preload" href="/assets/js/app.ed19ba6d.js" as="script"><link rel="preload" href="/assets/js/13.7bfd8c5c.js" as="script"><link rel="prefetch" href="/assets/js/10.725adfc7.js"><link rel="prefetch" href="/assets/js/11.d37d9b8b.js"><link rel="prefetch" href="/assets/js/12.7381f097.js"><link rel="prefetch" href="/assets/js/14.0851aedb.js"><link rel="prefetch" href="/assets/js/15.4aa69a87.js"><link rel="prefetch" href="/assets/js/16.e91cefc8.js"><link rel="prefetch" href="/assets/js/17.bf11e506.js"><link rel="prefetch" href="/assets/js/18.cfde5974.js"><link rel="prefetch" href="/assets/js/19.6182ee07.js"><link rel="prefetch" href="/assets/js/2.af91441d.js"><link rel="prefetch" href="/assets/js/20.be8f3590.js"><link rel="prefetch" href="/assets/js/21.0c23aafe.js"><link rel="prefetch" href="/assets/js/22.72f4f18e.js"><link rel="prefetch" href="/assets/js/23.963bec41.js"><link rel="prefetch" href="/assets/js/24.e713fe21.js"><link rel="prefetch" href="/assets/js/25.b1041c73.js"><link rel="prefetch" href="/assets/js/26.db6b8971.js"><link rel="prefetch" href="/assets/js/27.8d89063d.js"><link rel="prefetch" href="/assets/js/28.c52d33c4.js"><link rel="prefetch" href="/assets/js/29.76a01272.js"><link rel="prefetch" href="/assets/js/3.3e582861.js"><link rel="prefetch" href="/assets/js/30.c68724aa.js"><link rel="prefetch" href="/assets/js/31.527e2096.js"><link rel="prefetch" href="/assets/js/32.e1cfa260.js"><link rel="prefetch" href="/assets/js/4.3bfa2392.js"><link rel="prefetch" href="/assets/js/5.1a95e6c3.js"><link rel="prefetch" href="/assets/js/6.aedd08db.js"><link rel="prefetch" href="/assets/js/7.45f2728a.js"><link rel="prefetch" href="/assets/js/8.5fcdd9e7.js"><link rel="prefetch" href="/assets/js/9.778a7fc4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.003d6652.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Azure's Notebook</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><!---->  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>Data-Structure</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Network</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/Network/" class="sidebar-link">Network 笔记</a></li><li><a href="/Network/TCP.html" class="sidebar-link">TCP 协议</a></li><li><a href="/Network/Socket.html" class="sidebar-link">Socket</a></li><li><a href="/Network/HTTP.html" class="active sidebar-link">HTTP 协议</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Network/HTTP.html#_1-http-请求方法" class="sidebar-link">1. HTTP 请求方法</a></li><li class="sidebar-sub-header"><a href="/Network/HTTP.html#_2-http-报文" class="sidebar-link">2. HTTP 报文</a></li><li class="sidebar-sub-header"><a href="/Network/HTTP.html#_3-http-状态码" class="sidebar-link">3. HTTP 状态码</a></li><li class="sidebar-sub-header"><a href="/Network/HTTP.html#_4-http-首部" class="sidebar-link">4. HTTP 首部</a></li><li class="sidebar-sub-header"><a href="/Network/HTTP.html#_5-http-缓存机制" class="sidebar-link">5. HTTP 缓存机制</a></li><li class="sidebar-sub-header"><a href="/Network/HTTP.html#_6-参考" class="sidebar-link">6. 参考</a></li></ul></li><li><a href="/Network/Websocket-first-face.html" class="sidebar-link">初识 Websocket 协议</a></li><li><a href="/Network/OAuth2.html" class="sidebar-link">OAuth2</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Linux</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>PHP</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>MySQL</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Redis</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="http-协议"><a href="#http-协议" aria-hidden="true" class="header-anchor">#</a> HTTP 协议</h1> <p>HTTP 协议和 TCP/IP 协议族内的其他众多的协议相同，用于客户端和服务器之间的通信。是一种不保存状态，即无状态 ( stateless ) 协议。也就是说在 HTTP 这个级别，协议对于发送过的请求或响应都不做持久化处理。使用 URI 定位互联网上的资源。正是因为 URI 的特定功能，在互联网上任意位置的资源都能访问到。</p> <h3 id="持久连接"><a href="#持久连接" aria-hidden="true" class="header-anchor">#</a> 持久连接</h3> <p>持久连接 ( keep-alive ) 的特点是，只要任意一端没有明确提出断开连接，则保持 TCP 连接状态。解决了请求一个页面需要多次获取相关文件 ( style \ script \ image ) 而频繁建立通信连接增加通信量开销的问题。</p> <blockquote><p>WebSocket 协议也是基于持久连接的特点，不但减少通信量开销的问题，还使客户端与服务端双向通信成为可能。</p></blockquote> <h3 id="状态管理"><a href="#状态管理" aria-hidden="true" class="header-anchor">#</a> 状态管理</h3> <p>HTTP 是无状态协议，它不对之前发生过的请求和响应的状态进行管理。也就是说，无法根据之前的状态进行本次的请求处理，保持登录状态也就不可能。于是 Cookie 技术被引入，通过在请求和响应报文中写入信息来控制客户端的状态。</p> <h2 id="_1-http-请求方法"><a href="#_1-http-请求方法" aria-hidden="true" class="header-anchor">#</a> 1. HTTP 请求方法</h2> <ul><li>GET</li> <li>POST</li> <li>PUT</li> <li>DELETE</li> <li>HEAD</li> <li>OPTIONS</li> <li>TRACE</li></ul> <h2 id="_2-http-报文"><a href="#_2-http-报文" aria-hidden="true" class="header-anchor">#</a> 2. HTTP 报文</h2> <p>用于 HTTP 协议交互的信息被称为 HTTP 报文。请求端 ( 客户端 ) 的 HTTP 报文叫做请求报文，响应端 ( 服务器端 ) 的叫做响应报文。HTTP 报文本身是由多行 ( 用 CR + LF 作换行符 ) 数据构成的字符串文本。HTTP 报文大致可分为报文首部和报文主体两块，两者由最初出现的空行 ( CR+LF ) 来划分。报文首部一定要有，而不一定要有报文主体。</p> <h3 id="_2-1-报文的结构"><a href="#_2-1-报文的结构" aria-hidden="true" class="header-anchor">#</a> 2.1 报文的结构</h3> <table><thead><tr><th>父</th> <th>子</th></tr></thead> <tbody><tr><td>报文</td> <td>（请求 \ 响应）报文首部、空行、报文主体。</td></tr> <tr><td>请求报文首部</td> <td>请求行、请求首部字段、通用首部字段、实体首部字段、其他。</td></tr> <tr><td>响应报文首部</td> <td>状态行、响应首部字段、通用首部字段、实体首部字段、其他。</td></tr> <tr><td>请求行</td> <td>用户请求的方法、请求 URI 、 HTTP 版本。</td></tr> <tr><td>状态行</td> <td>表明响应结果的状态码、原因短语、 HTTP 版本。</td></tr></tbody></table> <blockquote><p>首部字段中其他可能包含 HTTP 的 RFC 里未定义的首部（Cookie 等）。</p></blockquote> <h5 id="_2-1-1-报文主体和实体主体的差异"><a href="#_2-1-1-报文主体和实体主体的差异" aria-hidden="true" class="header-anchor">#</a> 2.1.1 报文主体和实体主体的差异</h5> <table><thead><tr><th>中文</th> <th>英文</th> <th>描述</th></tr></thead> <tbody><tr><td>报文</td> <td>message</td> <td>HTTP 通信中的基本单位，由 8 位组字节流（octet sequence ，其中 octet 为 8 个比特）组成，通过 HTTP 通信传输。</td></tr> <tr><td>实体</td> <td>entity</td> <td>作为请求或响应的有效载荷数据（补充项）被传输，其内容由实体首部和实体主体组成。</td></tr></tbody></table> <p>通常，报文主体等于实体主体。只有当传输中进行编码操作时，实体主体的内容发生变化，才导致它和报文主体产生差异。</p> <h5 id="_2-1-2-压缩传输的内容编码"><a href="#_2-1-2-压缩传输的内容编码" aria-hidden="true" class="header-anchor">#</a> 2.1.2 压缩传输的内容编码</h5> <p>内容编码指明应用在实体内容上的编码格式，并保持实体信息原样压缩。内容编码后的实体由客户端接收并负责解码。常用的内容编码有： gzip（GUN zip）、 compress（UNIX 系统的标准压缩）、 deflate（zlib）、 identity（不进行编码）。</p> <h5 id="_2-1-3-分割发送的分块传输编码（chuncked-transfer-coding-）"><a href="#_2-1-3-分割发送的分块传输编码（chuncked-transfer-coding-）" aria-hidden="true" class="header-anchor">#</a> 2.1.3 分割发送的分块传输编码（Chuncked Transfer Coding ）</h5> <p>在 HTTP 通信过程中，请求的编码实体资源尚未全部传输完成之前，浏览器无法显示请求页面。在传输大容量数据时，通过把数据分割成多块，能够让浏览器逐步显示页面。</p> <h5 id="_2-1-4-发送多种数据的多部分对象集合"><a href="#_2-1-4-发送多种数据的多部分对象集合" aria-hidden="true" class="header-anchor">#</a> 2.1.4 发送多种数据的多部分对象集合</h5> <h5 id="_2-1-5-获取部分内容的范围请求"><a href="#_2-1-5-获取部分内容的范围请求" aria-hidden="true" class="header-anchor">#</a> 2.1.5 获取部分内容的范围请求</h5> <h5 id="_2-1-6-内容协商返回合适的内容"><a href="#_2-1-6-内容协商返回合适的内容" aria-hidden="true" class="header-anchor">#</a> 2.1.6 内容协商返回合适的内容</h5> <h2 id="_3-http-状态码"><a href="#_3-http-状态码" aria-hidden="true" class="header-anchor">#</a> 3. HTTP 状态码</h2> <p><code>1xx</code> 信息</p> <p>服务器收到请求，需要请求者继续执行操作</p> <p><code>2xx</code> 成功</p> <p>操作被成功接收并处理</p> <p><code>3xx</code> 重定向</p> <p>需要进一步的操作以完成请求</p> <p><code>4xx</code> 客户端错误</p> <p>请求包含语法错误或无法完成请求</p> <p><code>5xx</code> 服务器错误</p> <p>服务器在处理请求的过程中发生了错误</p> <table><thead><tr><th style="text-align:left">状态码</th> <th>状态名称</th> <th>状态描述</th></tr></thead> <tbody><tr><td style="text-align:left">200</td> <td>OK</td> <td>请求成功。一般用于GET与POST请求。</td></tr> <tr><td style="text-align:left">201</td> <td>Created</td> <td>已创建新的资源。</td></tr> <tr><td style="text-align:left">202</td> <td>Accepted</td> <td>已经接受请求，但未处理完成。</td></tr> <tr><td style="text-align:left">204</td> <td>No Content</td> <td>无返回内容。在未更新网页的情况下，可确保 User-Agent 继续显示当前文档。</td></tr> <tr><td style="text-align:left">205</td> <td>Reset Content</td> <td>User-Agent 应重置文档。可通过此返回码清除浏览器的表单域。</td></tr> <tr><td style="text-align:left"></td> <td></td> <td></td></tr> <tr><td style="text-align:left">301</td> <td>Moved Permanently</td> <td>永久移动。请求的资源已被永久的移动到新URI，返回信息会包括新的URI，浏览器会自动定向到新URI。今后任何新的请求都应使用新的URI代替。</td></tr> <tr><td style="text-align:left">302</td> <td>Found</td> <td>临时移动。资源只是临时被移动，客户端应继续使用原有URI。</td></tr> <tr><td style="text-align:left">304</td> <td>Not Modified</td> <td>所请求的资源未修改。服务器返回此状态码时，不会返回任何资源。User-Agent 虽然发现了本地有该资源的缓存，但是不确定是否是最新的，于是向服务器询问。若服务器认为浏览器的缓存版本还可用，那么便会返回此状态码。</td></tr> <tr><td style="text-align:left"></td> <td></td> <td></td></tr> <tr><td style="text-align:left">400</td> <td>Bad Request</td> <td>客户端请求的语法错误，服务器无法理解。</td></tr> <tr><td style="text-align:left">401</td> <td>Unauthorized</td> <td>请求要求用户的身份认证。</td></tr> <tr><td style="text-align:left">403</td> <td>Forbidden</td> <td>服务器理解请求客户端的请求，但是拒绝执行此请求。</td></tr> <tr><td style="text-align:left">404</td> <td>Not Found</td> <td>服务器无法根据客户端的请求找到资源。</td></tr> <tr><td style="text-align:left">405</td> <td>Method Not Allowed</td> <td>客户端请求中的方法被禁止。</td></tr> <tr><td style="text-align:left"></td> <td></td> <td></td></tr> <tr><td style="text-align:left">500</td> <td>Internal Server Error</td> <td>服务器内部错误，无法完成请求。</td></tr> <tr><td style="text-align:left">502</td> <td>Bad Gateway</td> <td>充当网关或代理的服务器，从远端服务器接收到了一个无效的请求。</td></tr> <tr><td style="text-align:left">503</td> <td>Service Unavailable</td> <td>服务超载或维护。服务器暂时的无法处理客户端的请求。延时的长度可包含在服务器的Retry-After头信息中。</td></tr></tbody></table> <h2 id="_4-http-首部"><a href="#_4-http-首部" aria-hidden="true" class="header-anchor">#</a> 4. HTTP 首部</h2> <h2 id="_5-http-缓存机制"><a href="#_5-http-缓存机制" aria-hidden="true" class="header-anchor">#</a> 5. HTTP 缓存机制</h2> <h3 id="_5-1-协商缓存"><a href="#_5-1-协商缓存" aria-hidden="true" class="header-anchor">#</a> 5.1 协商缓存</h3> <h5 id="_5-1-1-if-modified-since-与-last-modified"><a href="#_5-1-1-if-modified-since-与-last-modified" aria-hidden="true" class="header-anchor">#</a> 5.1.1 <code>If-Modified-Since</code> 与 <code>Last-modified</code></h5> <p>服务器程序检查请求头里面的 <code>If-modified-Since</code> ，如果最后修改时间相同 ( 例如静态文件的 Modified Time 通过 shell <code>ls -l</code> 可以查看 ) 则返回 304 ( 内容未修改 )，否则给相应头添加 <code>Last-Modified</code> 并且返回响应内容。</p> <h5 id="_5-1-2-if-none-match-与-etag"><a href="#_5-1-2-if-none-match-与-etag" aria-hidden="true" class="header-anchor">#</a> 5.1.2 <code>If-None-Match</code> 与 <code>Etag</code></h5> <p>服务器程序检查检查请求头里面的 <code>If-None-Match</code> 的值与当前文件的内容通过 HASH 算法生成的内容摘要字符对比，相同则直接返回 304，否则给相应头添加 <code>Etag</code> 属性为当前的内容摘要字符，并且返回响应内容。</p> <h3 id="_5-2-强缓存"><a href="#_5-2-强缓存" aria-hidden="true" class="header-anchor">#</a> 5.2 强缓存</h3> <p>如果在设置了 <code>Expires</code> 指定过期时间之前 或者 在 <code>Cache-Control</code> ( HTTP 1.0 不支持 ) 指定过期时间之内 , 浏览器不会发起请求。</p> <p><code>Expires</code> 和 <code>Cache-Control</code> 虽然是强缓存，但用户主动触发的刷新行为，还是会采用缓存协商的策略，主动触发的刷新行为包括点击刷新按钮、右键刷新、F5 刷新、Ctrl + F5 刷新等 , 发起请求如果没有修改会返回 304 ( 内容未修改 ) , 如果已经改变则返回新内容。</p> <p>当然如果在控制台里面选中了 disable cahce 则无论如何都会请求最新内容 ( 304 协商缓存、强缓存 都无效 ) ，因为 1. 不会检查本地是否有缓存 2. 请求头信息既没有 <code>If-Modified-Since</code> 也没有 <code>If-None-Match</code> 来让服务端判断 。</p> <h2 id="_6-参考"><a href="#_6-参考" aria-hidden="true" class="header-anchor">#</a> 6. 参考</h2> <ol><li>《 图解 HTTP 》</li> <li>https://blog.csdn.net/canot/article/details/76359917</li> <li>https://blog.csdn.net/kane_canpower/article/details/56488813</li></ol></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/Network/Socket.html" class="prev">
          Socket
        </a></span> <span class="next"><a href="/Network/Websocket-first-face.html">
          初识 Websocket 协议
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/13.7bfd8c5c.js" defer></script><script src="/assets/js/app.ed19ba6d.js" defer></script>
  </body>
</html>
