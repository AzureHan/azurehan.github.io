<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>PHP 面向对象 | Azure&#39;s Notebook</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/assets/css/0.styles.003d6652.css" as="style"><link rel="preload" href="/assets/js/app.ed19ba6d.js" as="script"><link rel="preload" href="/assets/js/28.c52d33c4.js" as="script"><link rel="prefetch" href="/assets/js/10.725adfc7.js"><link rel="prefetch" href="/assets/js/11.d37d9b8b.js"><link rel="prefetch" href="/assets/js/12.7381f097.js"><link rel="prefetch" href="/assets/js/13.7bfd8c5c.js"><link rel="prefetch" href="/assets/js/14.0851aedb.js"><link rel="prefetch" href="/assets/js/15.4aa69a87.js"><link rel="prefetch" href="/assets/js/16.e91cefc8.js"><link rel="prefetch" href="/assets/js/17.bf11e506.js"><link rel="prefetch" href="/assets/js/18.cfde5974.js"><link rel="prefetch" href="/assets/js/19.6182ee07.js"><link rel="prefetch" href="/assets/js/2.af91441d.js"><link rel="prefetch" href="/assets/js/20.be8f3590.js"><link rel="prefetch" href="/assets/js/21.0c23aafe.js"><link rel="prefetch" href="/assets/js/22.72f4f18e.js"><link rel="prefetch" href="/assets/js/23.963bec41.js"><link rel="prefetch" href="/assets/js/24.e713fe21.js"><link rel="prefetch" href="/assets/js/25.b1041c73.js"><link rel="prefetch" href="/assets/js/26.db6b8971.js"><link rel="prefetch" href="/assets/js/27.8d89063d.js"><link rel="prefetch" href="/assets/js/29.76a01272.js"><link rel="prefetch" href="/assets/js/3.3e582861.js"><link rel="prefetch" href="/assets/js/30.c68724aa.js"><link rel="prefetch" href="/assets/js/31.527e2096.js"><link rel="prefetch" href="/assets/js/32.e1cfa260.js"><link rel="prefetch" href="/assets/js/4.3bfa2392.js"><link rel="prefetch" href="/assets/js/5.1a95e6c3.js"><link rel="prefetch" href="/assets/js/6.aedd08db.js"><link rel="prefetch" href="/assets/js/7.45f2728a.js"><link rel="prefetch" href="/assets/js/8.5fcdd9e7.js"><link rel="prefetch" href="/assets/js/9.778a7fc4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.003d6652.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Azure's Notebook</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><!---->  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>Data-Structure</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Network</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Linux</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>PHP</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/PHP/" class="sidebar-link">PHP 笔记</a></li><li><a href="/PHP/Control-Inversion.html" class="sidebar-link">PHP 控制反转</a></li><li><a href="/PHP/Autoload-and-Composer.html" class="sidebar-link">PHP 类自加载与 Composer 原理</a></li><li><a href="/PHP/Object-oriented.html" class="active sidebar-link">PHP 面向对象</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/PHP/Object-oriented.html#_1-s-o-l-i-d-面向对象设计与编程" class="sidebar-link">1. S.O.L.I.D 面向对象设计与编程</a></li><li class="sidebar-sub-header"><a href="/PHP/Object-oriented.html#_2-设计模式" class="sidebar-link">2. 设计模式</a></li><li class="sidebar-sub-header"><a href="/PHP/Object-oriented.html#_3-参考" class="sidebar-link">3. 参考</a></li></ul></li><li><a href="/PHP/Laravel-Middleware.html" class="sidebar-link">Laravel 中间件</a></li><li><a href="/PHP/Install-Laravel-echo-server.html" class="sidebar-link">安装 Laravel-echo-server</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>MySQL</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Redis</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="php-面向对象"><a href="#php-面向对象" aria-hidden="true" class="header-anchor">#</a> PHP 面向对象</h1> <h2 id="_1-s-o-l-i-d-面向对象设计与编程"><a href="#_1-s-o-l-i-d-面向对象设计与编程" aria-hidden="true" class="header-anchor">#</a> 1. S.O.L.I.D 面向对象设计与编程</h2> <blockquote><p>S.O.L.I.D 是 <strong>面向对象设计</strong> 和 <strong>面试对象编程</strong> 的五个基本原则，应用这五个原则能创建一个易于维护和扩展的软件系统。</p></blockquote> <blockquote><p>S.O.L.I.D 可以指导代码重构和在迭代的过程中进行代码清扫，以使得软件源代码清晰可读和具有良好的扩展性。在测试驱动开发中是典型应用场景，并且也是敏捷开发和自适应软件开发基本原则的重要组成部分。</p></blockquote> <table><thead><tr><th>缩写</th> <th>英文</th> <th>中文</th> <th>概念</th></tr></thead> <tbody><tr><td>S</td> <td>Single Responsibility Principle</td> <td>单一职责原则</td> <td>对象应该只负责一种功能的实现</td></tr> <tr><td>O</td> <td>Opened Closed Principle</td> <td>开闭原则</td> <td>设计应该对扩展开放但对修改关闭</td></tr> <tr><td>L</td> <td>Liskov Substitution Principle</td> <td>里氏替换原则</td> <td>程序的对象可被继承者替换并保持正常</td></tr> <tr><td>I</td> <td>Interface Segregation Principle</td> <td>接口隔离原则</td> <td>调用者不需要依赖实现多余接口</td></tr> <tr><td>D</td> <td>Dependence Inversion Principle</td> <td>依赖反转原则</td> <td>附加功能应由外部注入而不是内部实现</td></tr></tbody></table> <h3 id="_1-1-单一职责原则-srp"><a href="#_1-1-单一职责原则-srp" aria-hidden="true" class="header-anchor">#</a> 1.1 单一职责原则 ( SRP )</h3> <blockquote><p>引起类变化的因素永远不要多于一个，也就是说一个类有且只有一个职责。</p></blockquote> <p>实现单一的功能的设计原则，常见于 PHP 程序中的 MVC 设计模型，其中每个模块负责它的功能。对于类而言，应该专注在一种逻辑上。在程序设计中应该要做的是让辅助一个类的其他逻辑打包到外部，然后调入其中。SRP 与 ISP 某程度上相似，但前者针对的是具体实现，后者是接口。在 Laravel 中，不好的例子是在愈发庞大的系统中，Model 文件往往越发臃肿且杂乱。因为 Model 中包含数据库访问、Model 间关系、Laravel 的 Model 接口、定义在 Model 自身的逻辑等等，这让代码难以维护。</p> <h4 id="_1-1-1-定义-特性"><a href="#_1-1-1-定义-特性" aria-hidden="true" class="header-anchor">#</a> 1.1.1 定义 / 特性</h4> <ul><li>仅有一个引起类变化的原因</li> <li>一个类只承担一项职责</li> <li>避免相同的职责分散到不同的类，功能重复</li></ul> <h4 id="_1-1-2-问题"><a href="#_1-1-2-问题" aria-hidden="true" class="header-anchor">#</a> 1.1.2 问题</h4> <ul><li>一个类承担的职责过多，多个职责间相互依赖，一个职责的变换会影响这个类完成其他职责的能力，当引起类变化的原因发生时，会遭受到意想不到的破坏</li></ul> <h4 id="_1-1-3-优势"><a href="#_1-1-3-优势" aria-hidden="true" class="header-anchor">#</a> 1.1.3 优势</h4> <ul><li><p><strong>减少类之间的耦合</strong></p> <p>当需求变化时，只修改一个类，从而隔离了变化带来类对其他职责的影响</p></li> <li><p><strong>提高类的复用性</strong></p> <p>按需引用，一个类负责一个职责，需求的变动只需要修改对应的类或增加某一职责</p></li> <li><p><strong>降低类的复杂度</strong></p> <p>职责单一，功能分散开降低一个类多个职责类的复杂度</p></li></ul> <h3 id="_1-2-开闭原则-ocp"><a href="#_1-2-开闭原则-ocp" aria-hidden="true" class="header-anchor">#</a> 1.2 开闭原则 ( OCP )</h3> <blockquote><p>正如 Bertrand Meyer 所述 &quot;软件的实体（类, 模块, 函数,等）应该对扩展开放，对修改关闭。&quot; 的这个原则是在说明应该允许用户在不改变已有代码的情况下增加新的功能。</p></blockquote> <blockquote><p>通常可以通过依赖关系抽象实现开闭原则，比如 interface ( 接口 )  或 abstract ( 抽象类 ) 而不是具体类，通过创建新的类实现它们来增加功能。</p></blockquote> <p>&quot;设计应该对扩展开放但对修改关闭&quot; 意思是某段代码始终应该不被修改，如果需要考虑到这段代码可以被扩展其能力，那么这段代码 ( 通常 ) 应该设计成抽象其依赖，由其依赖负责实现。</p> <h4 id="_1-2-1-定义-特性"><a href="#_1-2-1-定义-特性" aria-hidden="true" class="header-anchor">#</a> 1.2.1 定义 / 特性</h4> <ul><li><p><strong>一个模块在扩展行为方面应该是开放的</strong></p> <p>扩展行为 : 更替或增加模块能力</p> <p>开放的 : 『 公共 』的属性</p></li> <li><p><strong>一个模块在修改行为方面应该是封闭的</strong></p> <p>修改行为 : 从『 私有 』逻辑扩展</p> <p>封闭的 : 固定已有的逻辑</p></li></ul> <h4 id="_1-2-2-问题"><a href="#_1-2-2-问题" aria-hidden="true" class="header-anchor">#</a> 1.2.2 问题</h4> <ul><li>随着系统规模的不断扩大，系统的维护和修改的复杂性不断提高，系统一处的更改往往会影响到其他模块。</li></ul> <h4 id="_1-2-3-优势"><a href="#_1-2-3-优势" aria-hidden="true" class="header-anchor">#</a> 1.2.3 优势</h4> <ul><li>模块的行为是可扩展的，可以方便的对现有模块的 行为 / 功能 进行扩展</li> <li>对于模块行为的扩展 不会 / 较小 的影响现有 系统 / 模块</li></ul> <h3 id="_1-3-里氏替换原则-lsp"><a href="#_1-3-里氏替换原则-lsp" aria-hidden="true" class="header-anchor">#</a> 1.3 里氏替换原则 ( LSP )</h3> <p>如果你有一个类和其一个子类，在不改变原有结果正确性的前提下父类和子类可以互换，而你无须了解这个变化。在面向对象设计中一个违反 LSP 的典型例子是 Square ( 正方形 ) 类派生于 Rectangle ( 长方形 ) 类，长方形有『 长 』和『 宽 』，而正方形只有『 边长 』。</p> <blockquote><p>LSP 是 OCP 得以应用的最主要的原则之一，正是因为子类性的可替换行是的基类类型在无需修改的情况下扩展功能。</p></blockquote> <h4 id="_1-3-1-定义"><a href="#_1-3-1-定义" aria-hidden="true" class="header-anchor">#</a> 1.3.1 定义</h4> <ul><li>一个子类的实例应该能够替换任何其父类的实例</li></ul> <h4 id="_1-3-2-问题"><a href="#_1-3-2-问题" aria-hidden="true" class="header-anchor">#</a> 1.3.2 问题</h4> <ul><li>如果没有 LSP 类继承就会混乱</li> <li>如果子类作为一个参数传递给方法将会出现未知行为</li> <li>如果没有 LSP 适用与基类的单元测试将不能成功用于测试子类</li></ul> <h4 id="_1-3-3-优势"><a href="#_1-3-3-优势" aria-hidden="true" class="header-anchor">#</a> 1.3.3 优势</h4> <ul><li>能够判断抽象的类设计得是否 正确 / 严谨</li> <li>调用者只需要确保依赖于最顶层父类抽象</li></ul> <h3 id="_1-4-接口隔离原则-isp"><a href="#_1-4-接口隔离原则-isp" aria-hidden="true" class="header-anchor">#</a> 1.4 接口隔离原则 ( ISP )</h3> <blockquote><p>不要强迫客户端 ( 泛指调用者 ) 去实现那些他们不需要的接口</p></blockquote> <p>抽象的设计应该相对明确，人和机器人都可以进行工作。而人需要『 进食 』，机器人需要『 充电 』，因此让机器人继承人是不正确的。</p> <blockquote><p>当我们使用非内聚的接口时，ISP 指导我们创建多个较小的高内聚接口。</p></blockquote> <h4 id="_1-4-1-定义"><a href="#_1-4-1-定义" aria-hidden="true" class="header-anchor">#</a> 1.4.1 定义</h4> <ul><li>不应该强迫客户端依赖与他们不需要的 方法 / 功能</li> <li>一个类对一个类的依赖应该建立在『 最小 』的接口上</li> <li>接口的实现类应该只呈现为单一职责原则</li></ul> <h4 id="_1-4-2-问题"><a href="#_1-4-2-问题" aria-hidden="true" class="header-anchor">#</a> 1.4.2 问题</h4> <ul><li>当系统成型，不遵守 ISP 的『 随意 』修改接口将导致很多不需要此次修改的功能的类都要实现此方法，然而这样毫无意义。</li></ul> <h4 id="_1-4-3-优势"><a href="#_1-4-3-优势" aria-hidden="true" class="header-anchor">#</a> 1.4.3 优势</h4> <ul><li>『 高内聚 』</li> <li>『 低耦合 』</li></ul> <h3 id="_2-5-依赖反转原则-dip"><a href="#_2-5-依赖反转原则-dip" aria-hidden="true" class="header-anchor">#</a> 2.5 依赖反转原则 ( DIP )</h3> <blockquote><p>&quot;你会将一个灯直接焊接到墙上的电路吗 ？&quot;</p></blockquote> <h4 id="_1-5-1-定义"><a href="#_1-5-1-定义" aria-hidden="true" class="header-anchor">#</a> 1.5.1 定义</h4> <ul><li>高层模块不应该依赖底层模块，两者都应该依赖其抽象</li> <li>抽象不应该依赖于细节，细节应该依赖于抽象</li></ul> <h4 id="_1-5-2-问题"><a href="#_1-5-2-问题" aria-hidden="true" class="header-anchor">#</a> 1.5.2 问题</h4> <ul><li>假如电灯直接焊接在电路上，需要更换就非常需要功夫了，甚至还要花钱请电工。</li></ul> <h4 id="_1-5-3-优势"><a href="#_1-5-3-优势" aria-hidden="true" class="header-anchor">#</a> 1.5.3 优势</h4> <ul><li>『 高内聚 』</li> <li>『 低耦合 』</li></ul> <h2 id="_2-设计模式"><a href="#_2-设计模式" aria-hidden="true" class="header-anchor">#</a> 2. 设计模式</h2> <table><thead><tr><th>设计模式</th> <th>简要介绍</th></tr></thead> <tbody><tr><td>工厂模式</td> <td>由工厂类的方法创建对象，程序调用对应的方法获取新对象。</td></tr> <tr><td>注册器模式</td> <td>程序将对象绑定到一个键名下，需要时再根据键名获取对象。</td></tr> <tr><td>单例模式</td> <td>一个类只允许实例化一次。将实例存储在类的静态变量中，在实例化时直接返回。</td></tr> <tr><td>适配器模式</td> <td>对一些具有相同接口的类进行封装，程序通过代理调用无需自行适配。</td></tr> <tr><td>策略模式</td> <td>抽象业务逻辑成接口，程序依赖抽象，传入不同的对象到程序中即可执行不同的业务逻辑。</td></tr> <tr><td>观察者模式</td> <td>监听对象触发的事件执行不同时态相应的操作。</td></tr> <tr><td>数据-对象 映射模式</td> <td>将对象属性与数据库绑定，修改对象的属性相应改写数据库。</td></tr> <tr><td>原型模式</td> <td></td></tr> <tr><td>装饰器模式</td> <td></td></tr> <tr><td>迭代器模式</td> <td></td></tr> <tr><td>代理模式</td> <td></td></tr></tbody></table> <h2 id="_3-参考"><a href="#_3-参考" aria-hidden="true" class="header-anchor">#</a> 3. 参考</h2> <ol><li><a href="https://segmentfault.com/a/1190000015615106" target="_blank" rel="noopener noreferrer">PHP面向对象设计五大原则（SOLID）梳理总结<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://laravel-china.org/articles/4160/solid-notes-on-object-oriented-design-and-programming-oodoop" target="_blank" rel="noopener noreferrer">S.O.L.I.D 面向对象设计和编程（OOD&amp;OOP）笔记<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://segmentfault.com/a/1190000011662984" target="_blank" rel="noopener noreferrer">PHP代码简洁之道——SOLID原则<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ol></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/PHP/Autoload-and-Composer.html" class="prev">
          PHP 类自加载与 Composer 原理
        </a></span> <span class="next"><a href="/PHP/Laravel-Middleware.html">
          Laravel 中间件
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/28.c52d33c4.js" defer></script><script src="/assets/js/app.ed19ba6d.js" defer></script>
  </body>
</html>
